{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","url","delete","put","Filter","props","value","filterName","onChange","handleFilterChange","PersonForm","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","type","Person","person","persons","setPersons","setMessager","name","number","onClick","window","confirm","personService","filter","someone","setTimeout","AllPersons","toLowerCase","includes","map","Notification","message","error","className","App","useState","setNewName","setNewNumber","setFilter","messager","errorState","setError","useEffect","console","log","event","target","preventDefault","some","oldPerson","find","personObject","catch","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.06d46226.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = id => {\n  const url = baseUrl+'/'+id\n  const request = axios.delete(url)\n  return request.then(response => response.data)\n}\n\nconst update = (newObject) => {\n  const url = baseUrl+'/'+newObject.id\n  const request = axios.put(url, newObject)\n  return request.then(response => response.data)\n}\n\n/* eslint import/no-anonymous-default-export: [2, {\"allowObject\": true}] */\nexport default { \n  getAll, create, remove, update\n}","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\nconst Filter = (props) => {\n  return (\n    <div>\n    filter shown with <input value={props.filterName} onChange={props.handleFilterChange}/>\n    </div>\n  )\n}\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.addPerson}>\n    <div>\n      name: <input value={props.newName} onChange={props.handleNameChange}/>\n    </div>\n    <div>\n      number: <input value={props.newNumber} onChange={props.handleNumberChange}/>\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n  )\n}\n\nconst Person = ( {person, persons, setPersons, setMessager} ) => {\n  const handleClick = () => {\n    if (window.confirm(`Delete ${person.name}`)) {\n      personService\n      .remove(person.id)\n      .then(setPersons(persons.filter(someone => someone.id !== person.id)))\n      setMessager(\n        `Deleted ${person.name}`\n      )\n      setTimeout(() => {\n        setMessager(null)\n      }, 5000)\n    }\n  }\n  return (\n    <p>{person.name} {person.number} \n    <button type=\"button\" onClick={handleClick}>delete</button>\n    </p>\n  )\n}\n\nconst AllPersons = (props) => {\n  return (\n    <div>\n      {props.persons.filter(person =>\n          person.name.toLowerCase().includes(props.filterName.toLowerCase()) === true).map(person => \n            <Person key={person.name} person={person} persons={props.persons} setPersons={props.setPersons} setMessager={props.setMessager} />\n      )}\n    </div>\n  )\n}\n\nconst Notification = ({ message, error}) => {\n  if (message === null) {\n    return null\n  }\n\n  if (error) {\n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"messager\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filterName, setFilter ] = useState('')\n  const [ messager, setMessager] = useState(null)\n  const [ errorState, setError] = useState(false)\n\n  useEffect(() => {\n    console.log('effect')\n    personService\n      .getAll()\n      .then(response => {\n        console.log('promise fulfilled')\n        setPersons(response)\n      })\n  }, [])\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value)\n    setFilter(event.target.value)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    console.log('button clicked', event.target)\n    console.log(persons.some(person => person.name === newName))\n    if(persons.some(person => person.name === newName)) {\n      if(window.confirm(`${newName} is already added to phonebook, replace the old phone number with a new one?`)) {\n        const oldPerson = persons.find(person => person.name === newName)\n        const personObject = {...oldPerson, number: newNumber}\n        personService\n        .update(personObject)\n        .then(response => {\n          setPersons(persons.map(person => person.id === personObject.id ? response : person))\n          setNewName('')\n          setNewNumber('')\n          setMessager(\n            `Updated ${newName}'s phone number to ${newNumber}`\n          )\n          setTimeout(() => {\n            setMessager(null)\n          }, 5000)\n        })\n        .catch(error => {\n          setMessager(error.response.data.error)\n          console.log(error.response.data)\n          setError(true)\n          setTimeout(() => {\n            setMessager(null)\n            setError(false)\n          }, 5000)\n        })\n      }\n    }\n    else {\n      const personObject = {\n        name: newName,\n        number: newNumber\n      }\n      personService\n      .create(personObject)\n      .then(response => {\n        setPersons(persons.concat(response))\n        setNewName('')\n        setNewNumber('')\n        setMessager(\n          `Added ${newName}`\n        )\n        setTimeout(() => {\n          setMessager(null)\n        }, 5000)\n      })\n      .catch(error => {\n        setMessager(error.response.data.error)\n        console.log(error.response.data)\n        setError(true)\n        setTimeout(() => {\n          setMessager(null)\n          setError(false)\n        }, 5000)\n      })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={messager} error={errorState} />\n      <Filter filterName={filterName} handleFilterChange={handleFilterChange}/>\n      <h2>add a new</h2>\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\n      <h2>Numbers</h2>\n      <AllPersons persons={persons} filterName={filterName} setPersons={setPersons} setMessager={setMessager}/>\n    </div>\n  )\n\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}